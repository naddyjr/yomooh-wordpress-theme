(function($){'use strict';const config={defaultView:'grid',defaultColumns:'3',mobileBreakpoint:768,tabletBreakpoint:992,localStorageKeys:{view:'yomooh_shop_view',columns:'yomooh_shop_cols'}};$(document).ready(function(){initShopView();$(document).on('updated_cart_totals updated_wc_div',function(){initShopView()})});function initShopView(){const{view,columns}=getViewSettings();applyLayout(view,columns);initProductGallery();setupEventListeners();handleResponsiveLayout()}
function getViewSettings(){const urlParams=new URLSearchParams(window.location.search);let view=urlParams.get('view');let columns=urlParams.get('cols');if(!view)view=localStorage.getItem(config.localStorageKeys.view);if(!columns)columns=localStorage.getItem(config.localStorageKeys.columns);if(!view)view=config.defaultView;if(view==='grid'&&!columns)columns=config.defaultColumns;localStorage.setItem(config.localStorageKeys.view,view);if(view==='grid'){localStorage.setItem(config.localStorageKeys.columns,columns)}
return{view,columns}}
function setupEventListeners(){$('.yomooh-view-switcher').off('click').on('click','a',function(e){e.preventDefault();const url=new URL($(this).attr('href'),window.location.origin);const view=url.searchParams.get('view')||'grid';const cols=url.searchParams.get('cols')||config.defaultColumns;localStorage.setItem(config.localStorageKeys.view,view);if(view==='grid'){localStorage.setItem(config.localStorageKeys.columns,cols)}
window.location.href=url.toString()})}
function updateUrlParams(view,columns){const urlParams=new URLSearchParams(window.location.search);urlParams.set('view',view);if(view==='grid'){urlParams.set('cols',columns)}
history.replaceState({},'',`${location.pathname}?${urlParams.toString()}`)}
function applyLayout(view,columns){const $products=$('.products');$products.removeClass('yomooh-product-grid yomooh-product-list').removeClass('yomooh-grid-col-1 yomooh-grid-col-2 yomooh-grid-col-3 yomooh-grid-col-4');$products.addClass(`yomooh-product-${view}`);if(view==='grid'){$products.addClass(`yomooh-grid-col-${columns}`)}
updateSwitcherUI(view,columns)}
function updateSwitcherUI(view,columns){$('.yomooh-view-switcher a').removeClass('active');if(view==='list'){$('.yomooh-view-switcher a[href*="view=list"]').addClass('active')}else{$(`.yomooh-view-switcher a[href*="cols=${columns}"]`).addClass('active')}}
function initProductGallery(){$('.yomooh-product-image-wrapper').off('hover').hover(function(){$(this).find('.yomooh-product-gallery').stop().fadeTo(200,1)},function(){$(this).find('.yomooh-product-gallery').stop().fadeTo(200,0)})}
function handleResponsiveLayout(){const windowWidth=$(window).width();const $products=$('.products.yomooh-product-grid');const{view}=getViewSettings();if(view!=='grid')return;if(windowWidth<config.mobileBreakpoint){$products.removeClass('yomooh-grid-col-2 yomooh-grid-col-3 yomooh-grid-col-4').addClass('yomooh-grid-col-1')}else if(windowWidth<config.tabletBreakpoint){$products.removeClass('yomooh-grid-col-1 yomooh-grid-col-3 yomooh-grid-col-4').addClass('yomooh-grid-col-2')}else{const{columns}=getViewSettings();$products.removeClass('yomooh-grid-col-1 yomooh-grid-col-2 yomooh-grid-col-4').addClass(`yomooh-grid-col-${columns}`)}}})(jQuery)