(function($){"use strict";function initAccountDropdown(){$(".user-toggle").on("click",function(e){e.preventDefault();e.stopPropagation();$(this).toggleClass("active");$(".user-popup").toggleClass("active");$(".login-popup, .login-toggle").removeClass("active")});$(".login-toggle").on("click",function(e){e.preventDefault();e.stopPropagation();$(this).toggleClass("active");$(".login-popup").toggleClass("active");$(".user-popup, .user-toggle").removeClass("active")});$(document).on("click",function(e){if(!$(e.target).closest(".header-account").length){$(".account-popup, .account-toggle").removeClass("active")}});$(".popup-close").on("click",function(){$(this).closest(".account-popup").removeClass("active");$(".account-toggle").removeClass("active")});$(".login-form").on("submit",function(e){e.preventDefault();handleLoginForm($(this))})}
function handleLoginForm($form){$form.find(".login-error").remove();$form.find(".login-button").prop("disabled",!0).addClass("loading").html('<span class="spinner"></span>');$.ajax({type:"POST",dataType:"json",url:yomooh_vars.ajax_url,data:{action:"ajaxlogin",security:yomooh_vars.security,username:$form.find("#username").val(),password:$form.find("#password").val(),rememberme:$form.find("#rememberme").is(":checked")?1:0,redirect_to:$form.find('[name="redirect_to"]').val(),},success:function(response){$form.find(".login-button").prop("disabled",!1).removeClass("loading").text(yomooh_vars.login_text);if(response.success){window.location.href=response.data.redirect}else{showLoginError($form,response.data.message||yomooh_vars.login_error)}},error:function(xhr){$form.find(".login-button").prop("disabled",!1).removeClass("loading").text(yomooh_vars.login_text);let errorMessage=yomooh_vars.login_error;try{const jsonResponse=JSON.parse(xhr.responseText);if(jsonResponse.data&&jsonResponse.data.message){errorMessage=jsonResponse.data.message}}catch(e){console.error("Error parsing response:",e)}
showLoginError($form,errorMessage)},})}
function showLoginError($form,message){$form.find(".login-error").remove();$form.prepend($('<div class="login-error">').text(message));$form.addClass("shake");setTimeout(function(){$form.removeClass("shake")},500)}
function initScrollToTop(){const $scrollButton=$(".scroll-top");if(!$scrollButton.length)return;const activeClass="is-active";const offset=200;const $progressPath=$scrollButton.find(".scroll-top-progress path");const pathLength=$progressPath[0].getTotalLength();$progressPath.css({transition:"none","stroke-dasharray":pathLength+" "+pathLength,"stroke-dashoffset":pathLength});$progressPath[0].getBoundingClientRect();$progressPath.css("transition","stroke-dashoffset 10ms linear");function updateProgress(){const scroll=$(window).scrollTop();const height=$(document).height()-$(window).height();const progress=pathLength-(scroll*pathLength)/height;$progressPath.css("stroke-dashoffset",progress)}
function scrollToTop(){$("html, body").animate({scrollTop:0},"smooth")}
function toggleButton(){updateProgress();if($(window).scrollTop()>offset){$scrollButton.addClass(activeClass)}else{$scrollButton.removeClass(activeClass)}}
updateProgress();toggleButton();$scrollButton.on("click",scrollToTop);$(window).on("scroll",toggleButton)}
const initPostCarouselSlider=()=>{$(".post-carousel-slider-wrapper").each(function(){const $this=$(this);const settings=$this.data("settings");if($this.find(".swiper-container").hasClass("swiper-container-initialized")){return}
const swiperSettings={slidesPerView:settings.slidesPerView,slidesPerViewTablet:settings.slidesPerViewTablet,slidesPerViewMobile:settings.slidesPerViewMobile,spaceBetween:settings.spaceBetween,autoplay:settings.autoplay,loop:settings.loop,navigation:settings.navigation,pagination:settings.pagination,breakpoints:{320:{slidesPerView:settings.slidesPerViewMobile,spaceBetween:10},768:{slidesPerView:settings.slidesPerViewTablet,spaceBetween:20},1024:{slidesPerView:settings.slidesPerView,spaceBetween:settings.spaceBetween},},};new Swiper($this.find(".swiper-container")[0],swiperSettings)})};const initBreakingNewsSlider=()=>{$(".breaking-news-slider").each(function(){const $this=$(this);const settings=$this.data("settings");if($this.find(".swiper-container").hasClass("swiper-container-initialized")){return}
const swiperSettings={slidesPerView:settings.slidesPerView,loop:settings.loop,autoplay:settings.autoplay,navigation:{nextEl:settings.navigation.nextEl,prevEl:settings.navigation.prevEl},breakpoints:{320:{slidesPerView:1},768:{slidesPerView:settings.slidesPerView>1?2:1},1024:{slidesPerView:settings.slidesPerView}},};new Swiper($this.find(".swiper-container")[0],swiperSettings)})};const initAllSliders=()=>{initPostCarouselSlider();initBreakingNewsSlider()};const initElementorHooks=()=>{if(typeof elementor!=="undefined"){elementor.hooks.addAction("panel/open_editor/widget",(panel,model,view)=>{if(model.attributes.widgetType==="post-carousel-slider"||model.attributes.widgetType==="breaking-news"){setTimeout(initAllSliders,300)}});elementor.on("preview:loaded",()=>{initAllSliders()})}};const initCarousels=()=>{$(".yomooh-post-carousel").each(function(){const $carousel=$(this);const settings=$carousel.data("settings");if(!$carousel.hasClass("slick-initialized")){$carousel.slick(settings)}})};const initElementorCarouselHooks=()=>{if(typeof elementor!=="undefined"){elementor.channels.editor.on("change",()=>{setTimeout(initCarousels,300)});$(document).on("elementor/popup/show",initCarousels)}};$(document).ready(function(){initCookieNotice();initStickyHeader();initAccountDropdown();initScrollToTop();initCommentToggle();initSearchForms();initThemeObserver();initDesktopHeader();initMobileMenuHeader();initMobileSidebarHeader();initMobileSearchHeader();initMobileDropdown();initAllSliders();initElementorHooks();initCarousels();initElementorCarouselHooks()});function initCookieNotice(){const cookieNotice=document.getElementById("cookieNotice");if(!cookieNotice)return;const acceptButton=cookieNotice.querySelector(".cookie-accept-button");const declineButton=cookieNotice.querySelector(".cookie-decline-button");const cookieName="yomooh_cookie_consent";const cookieAccepted="accepted";const cookieDeclined="declined";const cookieExpiryDays=30;if(getCookie(cookieName)===cookieAccepted||getCookie(cookieName)===cookieDeclined){return}
setTimeout(()=>{cookieNotice.classList.add("show")},1000);acceptButton.addEventListener("click",function(){cookieNotice.classList.remove("show");cookieNotice.classList.add("hide");setCookie(cookieName,cookieAccepted,cookieExpiryDays)});declineButton.addEventListener("click",function(){cookieNotice.classList.remove("show");cookieNotice.classList.add("hide");setCookie(cookieName,cookieDeclined,cookieExpiryDays);clearNonEssentialCookies()});function setCookie(name,value,days){const date=new Date();date.setTime(date.getTime()+days*24*60*60*1000);const expires="expires="+date.toUTCString();document.cookie=name+"="+value+";"+expires+";path=/;SameSite=Lax"}
function getCookie(name){const cookieString=document.cookie;const cookies=cookieString.split(";");for(let i=0;i<cookies.length;i++){let cookie=cookies[i].trim();if(cookie.startsWith(name+"=")){return cookie.substring(name.length+1)}}
return""}
function clearNonEssentialCookies(){const nonEssential=["_ga","_gid","_fbp"];nonEssential.forEach(name=>{document.cookie=name+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax"})}}
function initStickyHeader(){const header=document.getElementById("mastheader");if(!header)return;const isStickyEnabled=header.getAttribute("data-sticky")==="true";let lastScrollPosition=0;if(isStickyEnabled){window.addEventListener("scroll",function(){const currentScrollPosition=window.pageYOffset;if(currentScrollPosition<=0){header.classList.remove("active")}else{header.classList.add("active")}
lastScrollPosition=currentScrollPosition})}else{window.addEventListener("scroll",function(){const currentScrollPosition=window.pageYOffset;if(currentScrollPosition>lastScrollPosition&&currentScrollPosition>100){header.classList.remove("active")}else{if(currentScrollPosition<=100){header.classList.remove("active")}else{header.classList.add("active")}}
lastScrollPosition=currentScrollPosition})}}
function initCommentToggle(){const commentList=document.getElementById("comment-list-container");const commentForm=document.getElementById("comment-form-container");const toggleButton=document.getElementById("comment-form-toggle-button");const commentCountToggle=document.querySelector(".comment-count-toggle");const commentTextarea=document.getElementById("comment");if(!commentList||!commentForm)return;if(commentList.children.length>0){commentList.style.display="block"}
if(toggleButton){toggleButton.addEventListener("click",()=>{const isFormVisible=commentForm.style.display==="block";if(!isFormVisible){commentForm.style.display="block";commentList.style.display="none";toggleButton.disabled=!0;commentForm.scrollIntoView({behavior:"smooth"})}else{commentForm.style.display="none";commentList.style.display="block";toggleButton.disabled=!1}})}
if(commentCountToggle){commentCountToggle.addEventListener("click",()=>{const isListVisible=commentList.style.display==="block";commentList.style.display=isListVisible?"none":"block";if(!isListVisible){commentForm.style.display="none";if(toggleButton)toggleButton.disabled=!1}})}
const commentFormEl=document.getElementById("commentform");if(commentFormEl&&commentTextarea){commentFormEl.addEventListener("submit",function(e){if(commentTextarea.value.trim()===""){e.preventDefault();alert("Comment cannot be empty!");commentTextarea.focus()}})}}
function initMobileDropdown(){const $mobileMenuToggles=$(".mobile-menu-toggle");const $mobileDropdowns=$("#mobile-dropdown");const $mobileOverlays=$(".mobile-sidebar-overlay");const $mobileSearchToggle=$(".mobile-search-toggle");const $mobileSearchDropdown=$(".mobile-search-dropdown");const $accountPopups=$(".account-popup");const $accountToggles=$(".account-toggle");const $body=$("body");if(yomooh_vars.mobile_menu_style!=="sidebar"){$mobileMenuToggles.on("click",function(e){e.stopPropagation();$(this).toggleClass("active");$mobileMenuToggles.toggleClass("active");$mobileDropdowns.toggleClass("active");$mobileOverlays.toggleClass("active");$mobileSearchToggle.removeClass("active");$mobileSearchDropdown.removeClass("active");$accountPopups.removeClass("active");$accountToggles.removeClass("active");if($mobileDropdowns.hasClass("active")){$body.addClass("mobile-dropdown-open");$body.data("scroll-pos",$(window).scrollTop())}else{$body.removeClass("mobile-dropdown-open");$(window).scrollTop($body.data("scroll-pos"))}});$(document).on("click",function(e){if($mobileDropdowns.hasClass("active")&&!$(e.target).closest("#mobile-dropdown").length&&!$(e.target).closest(".mobile-menu-toggle").length){$mobileMenuToggles.removeClass("active");$mobileDropdowns.removeClass("active");$mobileOverlays.removeClass("active");$body.removeClass("mobile-dropdown-open");$(window).scrollTop($body.data("scroll-pos"))}});$(document).on("keydown",function(e){if(e.key==="Escape"&&$mobileDropdowns.hasClass("active")){$mobileMenuToggles.removeClass("active");$mobileDropdowns.removeClass("active");$mobileOverlays.removeClass("active");$body.removeClass("mobile-dropdown-open");$(window).scrollTop($body.data("scroll-pos"))}})}}
function initMobileSidebarHeader(){const $mobileMenuToggle=$(".mobile-menu-toggle");const $mobileSidebar=$("#mobile-sidebar");const $mobileOverlay=$(".mobile-sidebar-overlay");const $mobileSidebarClose=$(".mobile-sidebar-close");const $mobileSearchToggle=$(".mobile-search-toggle");const $mobileSearchDropdown=$(".mobile-search-dropdown");$mobileMenuToggle.on("click",function(e){e.stopPropagation();$(this).toggleClass("active");$mobileSidebar.toggleClass("active");$mobileOverlay.toggleClass("active");$mobileSearchToggle.removeClass("active");$mobileSearchDropdown.removeClass("active");$("body").toggleClass("no-scroll",$mobileSidebar.hasClass("active"))});$mobileSidebarClose.on("click",function(){$mobileMenuToggle.removeClass("active");$mobileSidebar.removeClass("active");$mobileOverlay.removeClass("active");$("body").removeClass("no-scroll")});$(document).on("click",function(e){if($mobileSidebar.hasClass("active")&&!$(e.target).closest("#mobile-sidebar").length&&!$(e.target).closest(".mobile-menu-toggle").length){$mobileMenuToggle.removeClass("active");$mobileSidebar.removeClass("active");$mobileOverlay.removeClass("active");$("body").removeClass("no-scroll")}});$(document).on("keydown",function(e){if(e.key==="Escape"&&$mobileSidebar.hasClass("active")){$mobileMenuToggle.removeClass("active");$mobileSidebar.removeClass("active");$mobileOverlay.removeClass("active");$("body").removeClass("no-scroll")}})}
function initMobileSearchHeader(){const $mobileSearchToggle=$(".mobile-search-toggle");const $mobileSearchDropdown=$(".mobile-search-dropdown");const $mobileMenuToggle=$(".mobile-menu-toggle");const $mobileDropdowns=$("#mobile-dropdown");const $mobileOverlays=$(".mobile-sidebar-overlay");const $mobileSidebar=$("#mobile-sidebar");$mobileSearchToggle.on("click",function(e){e.stopPropagation();$(this).toggleClass("active");$mobileSearchDropdown.toggleClass("active");$mobileMenuToggle.removeClass("active");$mobileDropdowns.removeClass("active");$mobileOverlays.removeClass("active");$mobileSidebar.removeClass("active");$("body").removeClass("no-scroll")});$mobileSearchDropdown.on("click",function(e){e.stopPropagation()});$(document).on("click",function(e){if($mobileSearchDropdown.hasClass("active")&&!$(e.target).closest(".mobile-search-dropdown").length&&!$(e.target).closest(".mobile-search-toggle").length){$mobileSearchToggle.removeClass("active");$mobileSearchDropdown.removeClass("active")}});$(document).on("keydown",function(e){if(e.key==="Escape"&&$mobileSearchDropdown.hasClass("active")){$mobileSearchToggle.removeClass("active");$mobileSearchDropdown.removeClass("active")}});$(window).on("resize",function(){if($(window).width()>992){$mobileSearchToggle.removeClass("active");$mobileSearchDropdown.removeClass("active");$mobileMenuToggle.removeClass("active");$mobileDropdowns.removeClass("active");$mobileOverlays.removeClass("active");$mobileSidebar.removeClass("active");$("body").removeClass("no-scroll")}})}
function initMobileMenuHeader(){const $menuItemsWithChildren=$("#mobile-navigation li.menu-item-has-children");const $subMenus=$(".sub-menu");$("#mobile-navigation > ul > li.menu-item-has-children > a").append('<span class="submenu-toggle"><i class="wp-icon-chevron-down"></i></span>');$("#mobile-navigation > ul > li.menu-item-has-children").on("click","> a",function(e){if($(window).width()<=992){e.preventDefault();const $parent=$(this).parent();const $subMenu=$(this).siblings(".sub-menu");if(!$parent.hasClass("active")){$menuItemsWithChildren.not($parent).removeClass("active");$subMenus.not($subMenu).removeClass("active")}
$parent.toggleClass("active");$subMenu.toggleClass("active")}});$subMenus.each(function(){const $subMenu=$(this);const $parentItem=$subMenu.parent("li");if(!$parentItem.parent().is("#mobile-navigation > ul")){$parentItem.addClass("always-show-submenu");$subMenu.addClass("always-active");$subMenu.show();$parentItem.find("> a > .submenu-toggle").remove()}});$(document).on("keydown",function(e){if(e.key==="Escape"){$menuItemsWithChildren.removeClass("active");$subMenus.removeClass("active")}});let resizeTimer;$(window).on("resize",function(){clearTimeout(resizeTimer);resizeTimer=setTimeout(function(){if($(window).width()>992){$menuItemsWithChildren.removeClass("active");$subMenus.removeClass("active")}},250)})}
function initSearchForms(){$(".yomooh-search-form").each(function(){const $form=$(this);const $searchField=$form.find(".search-field");const $clearBtn=$form.find(".search-clear");const $submitIcon=$form.find(".wp-icon-arrow-long-right");function toggleClearButton(){$form.toggleClass("has-value",$searchField.val().trim()!=="")}
toggleClearButton();$searchField.on("input",toggleClearButton);$clearBtn.on("click",function(){$searchField.val("").focus();toggleClearButton()});$submitIcon.on("click",function(e){if($searchField.val().trim()!==""){$form.submit()}});$form.on("submit",function(e){if($searchField.val().trim()===""){e.preventDefault()}})});$(".search-toggle").on("click",function(e){e.preventDefault();$(this).toggleClass("active");$(".search-form-wrapper").toggleClass("active");$(".account-popup, .account-toggle").removeClass("active")})}
function initThemeObserver(){const themeObserver=new MutationObserver(function(mutations){mutations.forEach(function(mutation){if(mutation.attributeName==="data-theme"){adjustForTheme()}})});themeObserver.observe(document.documentElement,{attributes:!0});adjustForTheme()}
function adjustForTheme(){const isDark=document.documentElement.getAttribute("data-theme")==="dark";$("iframe").each(function(){const src=$(this).attr("src");if(src&&src.includes("youtube.com")){const newSrc=src.includes("?")?src+"&theme="+(isDark?"dark":"light"):src+"?theme="+(isDark?"dark":"light");$(this).attr("src",newSrc)}})}
function initDesktopHeader(){$(".submenu-toggle").on("click",function(e){if($(window).width()<=1024){e.preventDefault();e.stopPropagation();$(this).closest(".has-submenu").toggleClass("open")}});$(document).on("click",function(e){if($(window).width()<=1024&&!$(e.target).closest(".has-submenu").length){$(".has-submenu").removeClass("open")}});$(document).on("click",function(e){if(!$(e.target).closest(".header-search, .header-account").length){$(".search-form-wrapper, .account-popup").removeClass("active");$(".search-toggle, .account-toggle").removeClass("active")}});$(".popup-close").on("click",function(){$(".account-popup, .account-toggle").removeClass("active")});if($(window).width()>1024&&yomooh_vars.sticky_enabled){const $header=$("#masthead");const $clone=$("#sticky-header-clone");let lastScroll=0;const headerHeight=$header.outerHeight();$clone.html($header.html());$(window).on("scroll",function(){const scrollTop=$(window).scrollTop();if(scrollTop>lastScroll&&scrollTop>headerHeight){$header.addClass("hide-header").removeClass("show-header");$clone.addClass("sticky")}else if(scrollTop<lastScroll){$header.addClass("show-header").removeClass("hide-header");$clone.removeClass("sticky")}
lastScroll=scrollTop;if(scrollTop<=headerHeight){$header.removeClass("hide-header").addClass("show-header");$clone.removeClass("sticky")}}).trigger("scroll")}}
function initNewsletterPopup(){const popup=document.getElementById("yomooh-newsletter-popup");if(!popup)return;const closeBtn=popup.querySelector(".ns-popup-close");const cookiepopName="yomooh_newsletter_closed";const cookiepopValue="true";const cookiepopExpiryDays=30;if(getpopCookie(cookiepopName)){return}
setTimeout(()=>{popup.classList.add("active")},15000);closeBtn.addEventListener("click",()=>{popup.classList.remove("active");setpopCookie(cookiepopName,cookiepopValue,cookiepopExpiryDays)});function setpopCookie(name,value,days){const date=new Date();date.setTime(date.getTime()+days*24*60*60*1000);document.cookie=`${name}=${value};expires=${date.toUTCString()};path=/`}
function getpopCookie(name){const value=`; ${document.cookie}`;const parts=value.split(`; ${name}=`);if(parts.length===2)return parts.pop().split(";").shift();}}
document.addEventListener("DOMContentLoaded",initNewsletterPopup);document.addEventListener("DOMContentLoaded",function(){async function handleCopyLink(e){e.preventDefault();const button=e.currentTarget;let url=button.getAttribute("data-url");url=cleanUrl(url);try{await navigator.clipboard.writeText(url);showTooltipFeedback(button,"Copied!")}catch(err){console.error("Failed to copy: ",err);fallbackCopyText(url);showTooltipFeedback(button,"Copied!")}}
function cleanUrl(url){url=url.replace(/(https?:\/\/)+/i,"https://");url=url.replace(/(https?:\/\/)\/+/i,"$1");return url}
function showTooltipFeedback(button,message){const tooltip=button.querySelector(".tooltip");if(tooltip){const originalText=tooltip.textContent;tooltip.textContent=message;setTimeout(()=>{tooltip.textContent=originalText},2000)}}
function fallbackCopyText(text){const textarea=document.createElement("textarea");textarea.value=text;textarea.style.position="fixed";document.body.appendChild(textarea);textarea.select();try{document.execCommand("copy")}catch(err){console.error("Fallback copy failed: ",err)}
document.body.removeChild(textarea)}
function handlePrintPost(e){e.preventDefault();window.print()}
document.querySelectorAll(".js-copy-link").forEach((button)=>{button.addEventListener("click",handleCopyLink)});document.querySelectorAll(".js-print-post").forEach((button)=>{button.addEventListener("click",handlePrintPost)})});document.addEventListener("DOMContentLoaded",function(){const gallery=document.querySelector(".gallery");if(!gallery)return;gallery.addEventListener("scroll",()=>{const scrollLeft=gallery.scrollLeft;const scrollWidth=gallery.scrollWidth-gallery.clientWidth;const scrollPercent=(scrollLeft/scrollWidth)*100;gallery.style.setProperty("--scroll-progress",`${scrollPercent}%`);const after=gallery.querySelector(".gallery::after")})});document.addEventListener("DOMContentLoaded",function(){const loadmoreBtn=document.getElementById("loadmore-btn");if(loadmoreBtn){loadmoreBtn.addEventListener("click",function(){const spinner=document.querySelector(".loading-spinner");const container=document.querySelector(".blog-posts-container");let paged=parseInt(this.dataset.paged)+1;const maxPages=parseInt(this.dataset.maxPages);if(paged>maxPages){this.style.display="none";return}
this.disabled=!0;spinner.style.display="block";const nextLink=addQueryParam(window.location.href,"paged",paged);fetch(nextLink).then((response)=>response.text()).then((html)=>{const parser=new DOMParser();const doc=parser.parseFromString(html,"text/html");const posts=doc.querySelectorAll(".blog-posts-container > *");posts.forEach((post)=>{container.appendChild(post)});this.dataset.paged=paged;if(paged>=maxPages){this.style.display="none"}
this.disabled=!1;spinner.style.display="none"}).catch(()=>{this.disabled=!1;spinner.style.display="none"})})}
function addQueryParam(url,key,value){const urlObj=new URL(url);urlObj.searchParams.set(key,value);return urlObj.toString()}});document.addEventListener("DOMContentLoaded",function(){const btn=document.querySelector(".yomooh-loadmore-button");if(!btn)return;btn.addEventListener("click",function(){const spinner=document.querySelector(".yomooh-loading-spinner");const container=document.querySelector(".yomooh-listpost-listing");const nextPage=parseInt(btn.dataset.nextPage);const maxPages=parseInt(btn.dataset.maxPages);const baseUrl=btn.dataset.baseUrl;const url=baseUrl.replace("999999",nextPage);spinner.style.display="block";btn.disabled=!0;fetch(url).then((response)=>response.text()).then((html)=>{const parser=new DOMParser();const doc=parser.parseFromString(html,"text/html");const newPosts=doc.querySelector(".yomooh-listpost-listing").innerHTML;container.insertAdjacentHTML("beforeend",newPosts);btn.dataset.nextPage=nextPage+1;if(nextPage+1>maxPages){btn.style.display="none"}}).catch((error)=>console.error("Load More Error:",error)).finally(()=>{spinner.style.display="none";btn.disabled=!1})})})})(jQuery)